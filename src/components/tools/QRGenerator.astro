---

---

<div class="max-w-4xl mx-auto">
    <div
        class="bg-white dark:bg-slate-800 rounded-3xl shadow-2xl overflow-hidden border border-slate-200 dark:border-slate-700"
    >
        <!-- Header Area -->
        <div class="bg-gradient-to-r from-cyan-500 to-cyan-400 p-1">
            <div class="bg-white dark:bg-slate-800 p-6 md:p-8 rounded-t-[20px]">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <!-- Controls -->
                    <div class="space-y-6">
                        <div>
                            <label
                                for="qr-text"
                                class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"
                            >
                                Contenido (URL o Texto)
                            </label>
                            <textarea
                                id="qr-text"
                                rows="3"
                                class="w-full px-4 py-3 rounded-xl bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 focus:ring-2 focus:ring-cyan-500 focus:border-transparent resize-none transition-all"
                                placeholder="https://tu-sitio-web.com"
                            ></textarea>
                        </div>

                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label
                                    for="color-fg"
                                    class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"
                                >
                                    Color QR
                                </label>
                                <div class="flex items-center gap-2">
                                    <input
                                        type="color"
                                        id="color-fg"
                                        value="#000000"
                                        class="h-10 w-full rounded cursor-pointer"
                                    />
                                </div>
                            </div>
                            <div>
                                <label
                                    for="color-bg"
                                    class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2"
                                >
                                    Fondo
                                </label>
                                <div class="flex items-center gap-2">
                                    <input
                                        type="color"
                                        id="color-bg"
                                        value="#ffffff"
                                        class="h-10 w-full rounded cursor-pointer"
                                    />
                                </div>
                            </div>
                        </div>

                        <button
                            id="generate-btn"
                            class="w-full py-4 bg-gradient-to-r from-cyan-600 to-cyan-500 hover:from-cyan-500 hover:to-cyan-400 text-white rounded-xl font-bold text-lg transition-all hover:scale-[1.02] shadow-lg shadow-cyan-500/25"
                        >
                            Generar QR ‚ú®
                        </button>
                    </div>

                    <!-- Preview Area -->
                    <div
                        class="flex flex-col items-center justify-center bg-slate-50 dark:bg-slate-900/50 rounded-2xl border border-slate-200 dark:border-slate-700 p-8"
                    >
                        <div
                            id="qr-container"
                            class="mb-6 p-4 bg-white rounded-xl shadow-sm"
                        >
                            <canvas id="qr-canvas" class="max-w-full h-auto"
                            ></canvas>
                            <div
                                id="placeholder"
                                class="w-48 h-48 flex items-center justify-center text-slate-300 dark:text-slate-600"
                            >
                                <span class="text-6xl">üì±</span>
                            </div>
                        </div>

                        <a
                            id="download-btn"
                            class="hidden flex items-center gap-2 px-6 py-3 bg-slate-800 dark:bg-white text-white dark:text-slate-900 rounded-xl font-bold transition-all hover:scale-105"
                        >
                            <span class="text-xl">‚¨áÔ∏è</span>
                            Descargar PNG
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div
            class="bg-slate-50 dark:bg-slate-900/80 p-6 md:p-8 border-t border-slate-200 dark:border-slate-700"
        >
            <h3 class="font-bold text-slate-900 dark:text-white mb-2">
                Caracter√≠sticas:
            </h3>
            <ul
                class="grid grid-cols-1 md:grid-cols-2 gap-2 text-sm text-slate-600 dark:text-slate-400"
            >
                <li class="flex items-center gap-2">
                    ‚úÖ Generaci√≥n instant√°nea
                </li>
                <li class="flex items-center gap-2">
                    ‚úÖ Personalizaci√≥n de colores
                </li>
                <li class="flex items-center gap-2">‚úÖ Alta resoluci√≥n</li>
                <li class="flex items-center gap-2">
                    ‚úÖ Formato PNG universal
                </li>
            </ul>
        </div>
    </div>
</div>

<script>
    import QRCode from "qrcode";

    const qrText = document.getElementById("qr-text") as HTMLTextAreaElement;
    const colorFg = document.getElementById("color-fg") as HTMLInputElement;
    const colorBg = document.getElementById("color-bg") as HTMLInputElement;
    const generateBtn = document.getElementById(
        "generate-btn",
    ) as HTMLButtonElement;
    const qrCanvas = document.getElementById("qr-canvas") as HTMLCanvasElement;
    const placeholder = document.getElementById(
        "placeholder",
    ) as HTMLDivElement;
    const downloadBtn = document.getElementById(
        "download-btn",
    ) as HTMLAnchorElement;
    const qrContainer = document.getElementById(
        "qr-container",
    ) as HTMLDivElement;

    // Hide canvas initially
    qrCanvas.style.display = "none";

    async function generateQR() {
        const text = qrText.value.trim();
        if (!text) return;

        try {
            await QRCode.toCanvas(qrCanvas, text, {
                width: 300,
                margin: 2,
                color: {
                    dark: colorFg.value,
                    light: colorBg.value,
                },
            });

            // Show canvas, hide placeholder
            qrCanvas.style.display = "block";
            placeholder.style.display = "none";

            // Update download link
            const dataUrl = qrCanvas.toDataURL("image/png");
            downloadBtn.href = dataUrl;
            downloadBtn.download = `qr-code-${Date.now()}.png`;
            downloadBtn.classList.remove("hidden");
            downloadBtn.classList.add("flex");
        } catch (err) {
            console.error(err);
        }
    }

    generateBtn.addEventListener("click", generateQR);

    // Auto-generate on enter in textarea (if not shift+enter)
    qrText.addEventListener("keydown", (e) => {
        if (e.key === "Enter" && !e.shiftKey) {
            e.preventDefault();
            generateQR();
        }
    });
</script>
