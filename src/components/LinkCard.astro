---
interface Props {
  title: string;
  description: string;
  price: string;
  affiliateLink: string;
  image?: string;
  features?: string[];
}

const { title, description, price, affiliateLink, image, features = [] } = Astro.props;

const courseSchema = {
  "@context": "https://schema.org",
  "@type": "Course",
  "name": title,
  "description": description,
  "provider": {
    "@type": "Organization",
    "name": "DevbyCes4r",
    "sameAs": Astro.site
  },
  "offers": {
    "@type": "Offer",
    "price": price.replace(/[^0-9.]/g, ''),
    "priceCurrency": "USD",
    "availability": "https://schema.org/InStock",
    "url": affiliateLink
  }
};
---

<div class="group relative bg-slate-800 rounded-2xl p-6 border border-slate-700 hover:border-blue-500 transition-all duration-300 hover:shadow-xl hover:shadow-blue-500/10 flex flex-col h-full">
  <script type="application/ld+json" set:html={JSON.stringify(courseSchema)} />
  
  {image && (
    <div class="mb-6 rounded-xl overflow-hidden aspect-video bg-slate-900">
      <img src={image} alt={title} class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500" />
    </div>
  )}

  <h3 class="text-xl font-bold text-white mb-2 group-hover:text-blue-400 transition-colors">
    {title}
  </h3>
  
  <p class="text-slate-400 mb-6 flex-grow">
    {description}
  </p>

  {features.length > 0 && (
    <ul class="mb-6 space-y-2">
      {features.map(feature => (
        <li class="flex items-center text-sm text-slate-300">
          <svg class="w-4 h-4 mr-2 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
          </svg>
          {feature}
        </li>
      ))}
    </ul>
  )}

  <div class="mt-auto pt-6 border-t border-slate-700 flex items-center justify-between">
    <span class="text-2xl font-bold text-white">{price}</span>
    <a 
      href={affiliateLink} 
      target="_blank" 
      rel="noopener noreferrer"
      class="px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg font-medium transition-colors flex items-center"
    >
      Ver Link
      <svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"></path>
      </svg>
    </a>
  </div>
</div>
