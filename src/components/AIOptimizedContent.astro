---
interface Props {
  type: "tutorial" | "guide" | "reference" | "article" | "review";
  title: string;
  difficulty: "beginner" | "intermediate" | "advanced";
  timeToRead: string;
  prerequisites?: string[];
  learningOutcomes?: string[];
}

const {
  type,
  title,
  difficulty,
  timeToRead,
  prerequisites = [],
  learningOutcomes = [],
} = Astro.props;
---

<!-- AI-Friendly Content Wrapper -->
<article
  itemscope
  itemtype={type === "tutorial"
    ? "https://schema.org/TechArticle"
    : "https://schema.org/Article"}
  class="ai-optimized-content"
>
  <!-- Metadata visible para IA -->
  <div
    class="bg-gradient-to-r from-blue-50 to-purple-50 dark:from-slate-800/30 dark:to-slate-800/30 border-l-4 border-blue-500 dark:border-blue-500 p-6 my-8 rounded-r-xl not-prose shadow-sm"
    role="complementary"
  >
    <h3
      class="text-lg font-semibold text-slate-900 dark:text-white mb-4 flex items-center gap-2"
    >
      <svg
        class="w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
      </svg>
      <span>Información del Recurso</span>
    </h3>

    <dl class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
      <div>
        <dt class="text-slate-600 dark:text-slate-400 font-medium">
          Tipo de contenido
        </dt>
        <dd
          class="text-slate-900 dark:text-white mt-1 capitalize font-semibold"
          itemprop="articleSection"
        >
          {type}
        </dd>
      </div>

      <div>
        <dt class="text-slate-600 dark:text-slate-400 font-medium">Nivel</dt>
        <dd
          class="text-slate-900 dark:text-white mt-1 capitalize font-semibold"
          itemprop="educationalLevel"
        >
          {difficulty}
        </dd>
      </div>

      <div>
        <dt class="text-slate-600 dark:text-slate-400 font-medium">
          Tiempo de lectura
        </dt>
        <dd
          class="text-slate-900 dark:text-white mt-1 font-semibold"
          itemprop="timeRequired"
        >
          {timeToRead}
        </dd>
      </div>

      {
        prerequisites.length > 0 && (
          <div class="md:col-span-2">
            <dt class="text-slate-600 dark:text-slate-400 font-medium mb-2">
              Prerequisitos
            </dt>
            <dd class="list-none">
              <ul class="flex flex-wrap gap-2 list-none">
                {prerequisites.map((prereq) => (
                  <li
                    class="px-3 py-1.5 rounded-full text-xs font-medium 
                          bg-blue-50 text-blue-700 border border-blue-200
                          dark:bg-slate-800 dark:text-slate-100 dark:border-slate-700
                          hover:bg-blue-100 dark:hover:bg-slate-700 transition-colors"
                    itemprop="educationalAlignment"
                  >
                    {prereq}
                  </li>
                ))}
              </ul>
            </dd>
          </div>
        )
      }

      {
        learningOutcomes.length > 0 && (
          <div class="md:col-span-2">
            <dt class="text-slate-600 dark:text-slate-400 font-medium mb-2">
              Lo que aprenderás
            </dt>
            <dd class="list-none">
              <ul class="space-y-2 text-slate-700 dark:text-slate-200 list-none">
                {learningOutcomes.map((outcome) => (
                  <li
                    class="flex items-start gap-2 list-none"
                    itemprop="teaches"
                  >
                    <svg
                      class="w-5 h-5 text-green-600 dark:text-green-400 flex-shrink-0 mt-0.5"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M5 13l4 4L19 7"
                      />
                    </svg>
                    <span class="flex-1">{outcome}</span>
                  </li>
                ))}
              </ul>
            </dd>
          </div>
        )
      }
    </dl>
  </div>

  <!-- Slot para el contenido principal -->
  <slot />
</article>
