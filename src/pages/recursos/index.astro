---
import BaseLayout from "../../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";

const resources = await getCollection("resources");

// Group resources
type GroupedResources = Record<string, typeof resources>;
const groupedResources = resources.reduce<GroupedResources>((acc, resource) => {
  const groups = resource.data.group; // Already an array thanks to transform
  groups.forEach((group) => {
    if (!acc[group]) {
      acc[group] = [];
    }
    acc[group].push(resource);
  });
  return acc;
}, {});

// Define group order
const groupOrder = [
  "10 cursos gratuitos para web developer",
  "5 cursos gratis de inteligencia artificial",
  "10 Cursos GRATIS para Analistas de Datos y DBA",
];

const pageTitle = "Cursos Gratuitos de Desarrollo Web y AI | DevbyCes4r";
const pageDescription =
  "ColecciÃ³n de cursos gratuitos de desarrollo web, inteligencia artificial y ciencia de datos.";
---

<BaseLayout title={pageTitle} description={pageDescription}>
  <div class="min-h-screen py-10 px-4 flex justify-center">
    <div class="w-full max-w-5xl">
      <div class="text-center mb-16">
        <div class="text-6xl mb-4 animate-bounce">ðŸš€</div>
        <h1
          class="text-4xl md:text-5xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-500 mb-6"
        >
          Recursos Gratuitos
        </h1>
        <p class="text-xl text-slate-400 max-w-2xl mx-auto">
          Potencia tu carrera con esta selecciÃ³n de cursos de alta calidad.
        </p>
      </div>

      {
        groupOrder.map(
          (groupTitle) =>
            groupedResources[groupTitle] && (
              <div
                class="mb-20"
                id={groupTitle.toLowerCase().replace(/ /g, "-")}
              >
                <div class="flex items-center gap-4 mb-8">
                  <h2 class="text-2xl md:text-3xl font-bold text-white border-l-4 border-blue-500 pl-4">
                    <a
                      href={`#${groupTitle.toLowerCase().replace(/ /g, "-")}`}
                      class="hover:text-blue-400 transition-colors"
                    >
                      {groupTitle.replace(/-/g, " ")}
                    </a>
                  </h2>
                  <div class="h-px bg-slate-800 flex-grow" />
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                  {groupedResources[groupTitle].map((resource) => (
                    <a
                      href={`/recursos/${resource.slug}`}
                      class="group relative block p-6 bg-slate-800 border border-slate-700 rounded-2xl hover:-translate-y-1 hover:border-blue-500 hover:shadow-xl hover:shadow-blue-500/10 transition-all duration-300"
                    >
                      <div class="flex items-start gap-4">
                        <div class="text-4xl bg-slate-700/50 p-3 rounded-xl group-hover:scale-110 transition-transform duration-300">
                          {resource.data.icon}
                        </div>
                        <div>
                          <h3 class="text-xl font-bold text-white mb-2 group-hover:text-blue-400 transition-colors">
                            {resource.data.title}
                          </h3>
                          <p class="text-slate-400 text-sm line-clamp-2 mb-3">
                            {resource.data.description}
                          </p>
                          <span class="text-xs font-medium px-2 py-1 bg-blue-500/10 text-blue-300 rounded-full border border-blue-500/20">
                            {resource.data.category}
                          </span>
                        </div>
                      </div>

                      <div class="absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300 text-blue-400">
                        <svg
                          class="w-6 h-6"
                          fill="none"
                          stroke="currentColor"
                          viewBox="0 0 24 24"
                        >
                          <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                            d="M17 8l4 4m0 0l-4 4m4-4H3"
                          />
                        </svg>
                      </div>
                    </a>
                  ))}
                </div>
              </div>
            ),
        )
      }

      <div
        class="mt-16 p-8 bg-gradient-to-br from-blue-600 to-purple-600 rounded-2xl text-center text-white shadow-lg"
      >
        <h2 class="text-2xl font-bold mb-4">ðŸš€ Â¿Listo para comenzar?</h2>
        <p class="mb-6 text-blue-50">
          Explora estos y mÃ¡s cursos gratuitos en la plataforma
        </p>
        <a
          href="https://edutin.com/sh-10319"
          target="_blank"
          rel="noopener noreferrer"
          class="inline-block px-8 py-4 bg-white text-blue-600 rounded-xl font-bold text-lg hover:scale-105 hover:shadow-xl transition-all duration-300"
        >
          Ver Todos los Cursos ðŸ“š
        </a>
      </div>
    </div>
  </div>
</BaseLayout>
